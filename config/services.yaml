parameters:
    locale: en
    sylius.form.type.product_translation.validation_groups: [app_product]
    sylius.form.type.product.validation_groups: [app_product]

imports:
  - { resource: "@BitBagSyliusCmsPlugin/Resources/config/services/sitemap_provider.yml" }

services:
    _defaults:
        autowire: true

        autoconfigure: true

        public: false

    _instanceof:
        Sylius\Bundle\ResourceBundle\Controller\ResourceController:
            autowire: false
        Sylius\Bundle\ResourceBundle\Form\Type\AbstractResourceType:
            autowire: false


    App\:
        resource: '../src/*'
        exclude: '../src/{Entity,Migrations,Tests,Kernel.php}'


    App\Controller\:
        resource: '../src/Controller'
        tags: ['controller.service_arguments']

    App\ShippingCalculator\ParcelCalculator:
        tags:
            -
                {
                    name: sylius.shipping_calculator,
                    calculator: "parcel",
                    label: "Parcel",
                    form_type: App\Form\Type\ParcelShippingCalculatorType
                }

    app.form.extension.type.customer_profile:
        class: App\Form\Extension\CustomerProfileTypeExtension
        tags:
            - { name: form.type_extension, extended_type: Sylius\Bundle\CustomerBundle\Form\Type\CustomerProfileType }
    
    app.factory.product:
        class: App\Factory\ProductFactory
        decorates: sylius.factory.product
        arguments: ['@app.factory.product.inner']
        public: false
    
    sylius.controller.shop.homepage:
        class: App\Controller\Shop\HomepageController
        autowire: true
        tags: ['controller.service_arguments']
    
    # app.block_event_listener.admin.layout.javascripts:
    #     class: Sylius\Bundle\UiBundle\Block\BlockEventListener
    #     arguments:
    #         - '@@App/Admin/_javascripts.html.twig'
    #     tags:
    #         - { name: kernel.event_listener, event: sonata.block.event.sylius.admin.layout.javascripts, method: onBlockEvent }