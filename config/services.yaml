parameters:
    locale: en
    sylius.form.type.product_translation.validation_groups: [app_product]
    sylius.form.type.product.validation_groups: [app_product]

imports:
  - { resource: "@BitBagSyliusCmsPlugin/Resources/config/services/sitemap_provider.yml" }
  - { resource: "grids/grids.yaml" }
services:
    _defaults:
        autowire: true

        autoconfigure: true

        public: false

    _instanceof:
        Sylius\Bundle\ResourceBundle\Controller\ResourceController:
            autowire: false
        Sylius\Bundle\ResourceBundle\Form\Type\AbstractResourceType:
            autowire: false


    App\:
        resource: '../src/*'
        exclude: '../src/{Entity,Migrations,Tests,Kernel.php}'


    App\Controller\:
        resource: '../src/Controller'
        tags: ['controller.service_arguments']

    App\ShippingCalculator\ParcelCalculator:
        tags:
            -
                {
                    name: sylius.shipping_calculator,
                    calculator: "parcel",
                    label: "Parcel",
                    form_type: App\Form\Type\ParcelShippingCalculatorType
                }

    app.form.extension.type.customer_profile:
        class: App\Form\Extension\CustomerProfileTypeExtension
        tags:
            - { name: form.type_extension, extended_type: Sylius\Bundle\CustomerBundle\Form\Type\CustomerProfileType }
    
    app.factory.product:
        class: App\Factory\ProductFactory
        decorates: sylius.factory.product
        arguments: ['@app.factory.product.inner']
        public: false

    app.menu_builder:
        class: App\Menu\MenuBuilder
        arguments: ["@knp_menu.factory"]
        tags:
            - { name: knp_menu.menu_builder, method: createMainMenu, alias: main } # The alias is what is used to retrieve the menu
    
    App\Controller\Sellers\ProductController:
      autowire: false
    
    App\Repository\StoreRepository:
      public: true